(function(a,c){var b=a(c);a.fn.lazyload=function(f){var e=this;var d;var g={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:c,data_attribute:"original",skip_invisible:true,appear:null,load:null};
function h(){var j=0;e.each(function(){var k=a(this);if(g.skip_invisible&&!k.is(":visible")){return}if(k.parents().filter(".carousel-item").css("left")>=k.parents().filter(".carousel").css("width")){return
}if(a.abovethetop(this,g)||a.leftofbegin(this,g)){}else{if(!a.belowthefold(this,g)&&!a.rightoffold(this,g)){k.trigger("appear");
j=0}else{if(++j>g.failure_limit){return false}}}})}if(f){if(undefined!==f.failurelimit){f.failure_limit=f.failurelimit;delete f.failurelimit
}if(undefined!==f.effectspeed){f.effect_speed=f.effectspeed;delete f.effectspeed}a.extend(g,f)}d=(g.container===undefined||g.container===c)?b:a(g.container);
if(0===g.event.indexOf("scroll")){d.bind(g.event,function(j){return h()})}this.each(function(){var k=this;var j=a(k);k.loaded=false;
j.one("appear",function(){if(!this.loaded){if(g.appear){var l=e.length;g.appear.call(k,l,g)}a("<img />").bind("load",function(){j.hide().attr("src",j.data(g.data_attribute))[g.effect](g.effect_speed);
k.loaded=true;var n=a.grep(e,function(o){return !o.loaded});e=a(n);if(g.load){var m=e.length;g.load.call(k,m,g)}}).attr("src",j.data(g.data_attribute))
}});if(0!==g.event.indexOf("scroll")){j.bind(g.event,function(l){if(!k.loaded){j.trigger("appear")}})}});b.bind("resize",function(j){h()
});a(document).ready(function(){h()});return this};a.belowthefold=function(d,f){var e;if(f.container===undefined||f.container===c){e=b.height()+b.scrollTop()
}else{e=a(f.container).offset().top+a(f.container).height()}return e<=a(d).offset().top-f.threshold};a.rightoffold=function(d,f){var e;
if(f.container===undefined||f.container===c){e=b.width()+b.scrollLeft()}else{e=a(f.container).offset().left+a(f.container).width()
}return e<=a(d).offset().left-f.threshold};a.abovethetop=function(d,f){var e;if(f.container===undefined||f.container===c){e=b.scrollTop()
}else{e=a(f.container).offset().top}return e>=a(d).offset().top+f.threshold+a(d).height()};a.leftofbegin=function(d,f){var e;
if(f.container===undefined||f.container===c){e=b.scrollLeft()}else{e=a(f.container).offset().left}return e>=a(d).offset().left+f.threshold+a(d).width()
};a.inviewport=function(d,e){return !a.rightoffold(d,e)&&!a.leftofbegin(d,e)&&!a.belowthefold(d,e)&&!a.abovethetop(d,e)};a.extend(a.expr[":"],{"below-the-fold":function(d){return a.belowthefold(d,{threshold:0})
},"above-the-top":function(d){return !a.belowthefold(d,{threshold:0})},"right-of-screen":function(d){return a.rightoffold(d,{threshold:0})
},"left-of-screen":function(d){return !a.rightoffold(d,{threshold:0})},"in-viewport":function(d){return a.inviewport(d,{threshold:0})
},"above-the-fold":function(d){return !a.belowthefold(d,{threshold:0})},"right-of-fold":function(d){return a.rightoffold(d,{threshold:0})
},"left-of-fold":function(d){return !a.rightoffold(d,{threshold:0})}})})(jQuery,window);$("img[data-lazyload=true]").lazyload();
AR.DetailPage={SlideContent:function(a,d,b,c){b.attr("src",c);a.attr("display","block");d.attr("display","block");d.slideDown(400);
a.slideUp(200)},CurrentList:".review",SwitchLists:function(c){if(this.CurrentList==c){return}var b=$("a.link-more-reviews");var a=$("a.link-custom-versions");
if(c===".review"){b.show();a.hide()}else{if(c===".custom"){b.hide();a.show()}else{b.hide();a.hide()}}$(c+"-block").slideDown(400,"swing");
$(this.CurrentList+"-block").slideUp(400,"swing");$(this.CurrentList+"-link").removeClass("on");this.CurrentList=c;$(this.CurrentList+"-link").addClass("on")
},MinusImageURL:"ar/myar/icons/icon-minus.gif",PlusImageURL:"ar/myar/icons/icon-plus.gif",CustomLoaded:false,SavedLoaded:false,MenusLoaded:false,ScrollAndOpenUserSaved:function(){if($(".detailpagemidpagetabs").offset()){var a=$(".detailpagemidpagetabs").offset().top;
$("html, body").animate({scrollTop:a},"slow");if(!AR.DetailPage.SavedLoaded){AR.DetailPage.LoadSaved()}AR.DetailPage.SwitchLists(".saved")
}},ScrollAndOpenCustomVersions:function(){if($(".detailpagemidpagetabs").offset()){var a=$(".detailpagemidpagetabs").offset().top;
$("html, body").animate({scrollTop:a},"slow");AR.DetailPage.OpenCustomVersions()}},OpenCustomVersions:function(){if(!AR.DetailPage.CustomLoaded){AR.DetailPage.LoadCustom();
AR.DetailPage.SwitchLists(".custom");AR.DetailPage.TruncateCustom(300)}else{AR.DetailPage.SwitchLists(".custom")}},LoadCustomVersionsPage:function(){AR.DetailPage.LoadCustom();
$(".custom-block").show();AR.DetailPage.TruncateCustom(450)},ScrollAndOpenMenus:function(){if($(".detailpagemidpagetabs").offset()){var a=$(".detailpagemidpagetabs").offset().top;
$("html, body").animate({scrollTop:a},"slow");if(!AR.DetailPage.MenusLoaded){AR.DetailPage.LoadMenus()}AR.DetailPage.SwitchLists(".menus")
}},LoadMenus:function(){var a=$(".menu");var d=AR.ServerSideData.Get("menusData");var c=$(".menus-block");var b;if(a&&d&&c){jQuery.each(d,function(){var e=a.clone();
$("#title",e).text(this.title);$("#title",e).attr("href",this.detailLink);b=(this.isSample)?"titleLink":"titleLink linkRequiresSupportingMembership featureHintMenus";
$("#title",e).attr("class",b);$("#description",e).text(this.desc);$(".image-link",e).attr("href",this.imageLink);b=(this.isSample)?"image-link":"image-link linkRequiresSupportingMembership featureHintMenus";
$(".image-link",e).attr("class",b);if(this.img!=""){$("#previewImage",e).attr("src",this.img)}else{$("#previewImage",e).hide()
}$("#recipeCount",e).text(this.recipeCount);$("#mealCount",e).text(this.mealCount);if(this.tags!=""){$("#tags",e).text(this.tags)
}if(this.creatorLink!=""){$("#creatorLink",e).text(this.creatorName);$("#creatorLink",e).attr("href",this.creatorLink);$("#creatorName",e).hide()
}else{$("#creatorName",e).text(this.creatorName);$("#creatorLink",e).hide()}if(this.isSample==false){$("#isSample",e).hide()}else{$("#isSample",e).show()
}c.append(e.html())})}if(AR.DialogLinker!=null){AR.DialogLinker.LinkMembershipDialogs($(".menu"))}this.MenusLoaded=true},LoadCustom:function(){var a=$(".customVersion");
var c=AR.ServerSideData.Get("customVersions");var b=$(".custom-block");if(a&&c&&b){jQuery.each(c,function(){var d=a.clone();if(this.isBP==true){$("#container",d).removeClass("blinged").addClass("branded");
$("#iconSpan",d).hide()}if(this.img!=""){$("#profileImage",d).attr("src",this.img)}else{$("#profileImage",d).hide()}$("#title",d).attr("href",this.detailLink).text(this.title);
if(this.userLink!=""){$("#profileURL",d).attr("href",this.userLink).text(this.userName);$("#submitterName",d).hide()}else{$("#profileURL",d).hide();
$("#submitterName",d).text(this.userName)}var e=$("#customrec-tags",d);if(this.CRTags.length>0){var f=this;$.each(this.CRTags,function(k,m){var l=AR.DetailPage.GetCustomRecipeTagTooltip(m);
var g=AR.DetailPage.GetCustomRecipeTagCssClass(m);var j=$("<div>").attr("class",g).attr("title",l).html("&nbsp;");if(k!=0){var h=$("<div>").attr("class","tagdivider").html("&nbsp;");
e.prepend(h)}e.prepend(j)})}if(this.whatChanged!=""){$("#whatChanged",d).text(this.whatChanged)}else{$(".customchanges",d).hide()
}$("#description",d).text(this.desc);b.append(d.html())})}this.CustomLoaded=true},TruncateCustom:function(a){$(".customWhatChanged").textTruncate({width:a})
},GetCustomRecipeTagCssClass:function(b){var a="";switch(b){case 31:a="spicy";break;case 32:a="healthier";break;case 33:a="veg";
break;case 34:a="quick";break;case 35:a="budget";break;case 36:a="restricted";break;case 37:a="kid";break;case 38:a="flair";break
}return a},GetCustomRecipeTagTooltip:function(b){var a="";switch(b){case 31:a="Spicier";break;case 32:a="Healthier";break;case 33:a="Vegetarian / Vegan";
break;case 34:a="Quick & Easy";break;case 35:a="Budget Friendly";break;case 36:a="Restricted / Special Diet";break;case 37:a="Kid Friendly";
break;case 38:a="Flair";break}return a},LoadSaved:function(){var a=$(".userWhoSaved");var c=AR.ServerSideData.Get("userWhoSaved");
var b=$(".saved-block");if(a&&c&&b){jQuery.each(c,function(){var d=a.clone();$("#profileImage",d).attr("src",this.imgUrl);if(this.regionName&&this.regionName!=""){$("#region",d).attr("href",this.regionUrl).text(this.regionName);
$("#country",d).attr("href",this.countryUrl).text(this.countryName)}else{$("#savedLocation",d).hide()}if(this.userUrl!=""){$("#profileURL",d).attr("href",this.userUrl).text(this.userName);
$("#submitterName",d).hide();$("#prof",d).attr("href",this.userUrl);$("#profText",d).hide();$("#rb",d).attr("href",this.userUrl.replace("Profile.aspx","Recipes.aspx"));
$("#rbText",d).hide();if(this.reviews=="true"){$("#review",d).attr("href",this.userUrl.replace("Profile.aspx","Reviews.aspx"));
$("#revText",d).hide()}else{$("#review",d).hide();$("#revText",d).show()}}else{$("#profileURL",d).hide();$("#submitterName",d).text(this.userName);
$("#rb",d).hide();$("#prof",d).hide();$("#review",d).hide()}if(this.isBP==true){$("#container",d).removeClass("blinged").addClass("branded");
$("#iconSpan",d).hide();$("#spanReviewContainer",d).hide()}else{if(this.isSupporting=="false"){$(".author-info",d).removeClass("blinged");
$("#iconSpan",d).hide()}}$("#savedOn",d).text(this.saved);b.append(d.html())})}this.SavedLoaded=true},OnPhotoCountIncrease:function(){$("div.recipe-photos").css("display","block");
var a=$("span.userphotocount");var b=parseInt(a.text());if(b!=NaN){b=b+1}a.text(b);a.next("span").text(b>1?" Photos":" Photo")
},};$(document).ready(function(){$("a.nutritional-information").click(function(b){b.preventDefault();if($("#nutri-info").is(":hidden")){AR.DetailPage.SlideContent($("p.nutritional-information"),$("#nutri-info"),$("img.nutritional-information"),AR.ImageServer+AR.DetailPage.MinusImageURL)
}else{AR.DetailPage.SlideContent($("#nutri-info"),$("p.nutritional-information"),$("img.nutritional-information"),AR.ImageServer+AR.DetailPage.PlusImageURL)
}});$(".listItemReview").click(function(b){b.preventDefault();if($(".listItemReviewFull",$(this).parent().parent()).is(":hidden")){AR.DetailPage.SlideContent($(".listItemReviewMini",$(this).parent().parent()),$(".listItemReviewFull",$(this).parent().parent()),$(".listItemReviewImage",$(this)),AR.ImageServer+AR.DetailPage.MinusImageURL);
$(".listItemReviewImage",$(this)).attr("alt","show less");$(".listItemReviewImage",$(this)).attr("title","show less")}else{AR.DetailPage.SlideContent($(".listItemReviewFull",$(this).parent().parent()),$(".listItemReviewMini",$(this).parent().parent()),$(".listItemReviewImage",$(this)),AR.ImageServer+AR.DetailPage.PlusImageURL);
$(".listItemReviewImage",$(this)).attr("alt","view full review");$(".listItemReviewImage",$(this)).attr("title","view full review")
}});$(".review-link").click(function(b){b.preventDefault();AR.DetailPage.SwitchLists(".review")});$(".custom-link").click(function(b){b.preventDefault();
AR.DetailPage.OpenCustomVersions()});$(".menus-link").click(function(b){b.preventDefault();if(!AR.DetailPage.MenusLoaded){AR.DetailPage.LoadMenus()
}AR.DetailPage.SwitchLists(".menus")});$(".saved-link").click(function(b){b.preventDefault();if(!AR.DetailPage.SavedLoaded){AR.DetailPage.LoadSaved()
}AR.DetailPage.SwitchLists(".saved")});var a=AR.DetailPage.RecipeTools.IsWebLink()?"featureHintWeblinkAddToMenu":AR.DetailPage.RecipeTools.IsWebReference()?"featureHintReferenceAddToMenu":"featureHintRecipeAddToMenu";
$("a.RTMN").addClass(a);$(".userSaved").click(function(b){b.preventDefault();AR.DetailPage.ScrollAndOpenUserSaved()});$(".menu").click(function(b){b.preventDefault();
AR.DetailPage.ScrollAndOpenMenus()});$("a.RTRB").click(function(b){b.preventDefault();AR.DetailPage.RecipeTools.Slide($(".recipe-box-form"),$("a.RTRB"),"#liAddToRB",true)
});$("a.RTSL").click(function(b){b.preventDefault();AR.DetailPage.RecipeTools.Slide($(".shopping-list-form"),$("a.RTSL"),"#liAddToSL",true)
});$("a.RTSE").click(function(b){b.preventDefault();AR.DetailPage.RecipeTools.Slide($(".share-email-form"),$("a.RTSE"),"#liEmail",false)
});$("a.RTMN").click(function(c){c.preventDefault();if($(".menu-box-form").is(":hidden")){var b=AR.Analytics;var d=AR.ServerSideData.Get("sharedItemType");
var f=(AR.DetailPage.RecipeTools.IsMenu())?b.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsWebLink())?b.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?b.Action.Source.ReferencePage:b.Action.Source.RecipePage;
b.RecordAction(b.Event.Start,f,b.Action.Type.MenuAdd,d)}AR.DetailPage.RecipeTools.Slide($(".menu-box-form"),$("a.RTMN"),"#liAddToMyMenu",true)
});$("a.RT-recipe-send-to-a-friend").click(function(g){g.preventDefault();var b=AR.Analytics;var f=$("a.RT-recipe-send-to-a-friend");
var h=f.attr("data-recipe-detail-brandedemail");var j=(f.attr("data-recipe-detail-shared-item-type"))?f.attr("data-recipe-detail-shared-item-type"):"";
var l=(f.attr("data-recipe-detail-recipe-id"))?f.attr("data-recipe-detail-recipe-id"):"0";var k=(f.attr("data-recipe-detail-merchdate"))?f.attr("data-recipe-detail-merchdate"):"";
var c=(AR.DetailPage.RecipeTools.IsWebLink())?b.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?b.Action.Source.ReferencePage:b.Action.Source.RecipePage;
var d=(AR.DetailPage.RecipeTools.IsWebLink())?b.Action.Type.EmailWeblink:(AR.DetailPage.RecipeTools.IsWebReference())?b.Action.Type.EmailReference:(h)?b.Action.Type.EmailRecipeBranded:b.Action.Type.EmailRecipe;
var m=(j=="Recipe")?null:"#msgLabel";if(h){AR.Analytics.RecordActionOption(AR.TypeSpecificID,b.Action.Type.EmailRecipeBranded)
}ioc.Load("_dialogLauncher").MailRecipe(l,AR.VisitorInfo.VisitorID(),k,AR.TypeSpecificID,j,AR.ServerSideData.Get("sharedItemType"),c,d,h,function(e){if(e){b.RecordAction(b.Event.Complete,c,d,AR.ServerSideData.Get("sharedItemType"),l);
if(e!==true){window.location.href=e}AR.MessageBox.ShowSuccess("Recipe successfully emailed.",m,false)}else{AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this recipe.",m,false)
}},function(){AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this recipe.",m,false)})});$("a.emailVid").click(function(c){c.preventDefault();
var f=$("#msgClientPage");var b=$("a.emailVid");var d=(b.attr("data-video-detail-isPartnerVideo"))?b.attr("data-video-detail-isPartnerVideo"):"false";
ioc.Load("_dialogLauncher").MailVideo(AR.TypeSpecificID,d,function(e){if(e){AR.MessageBox.ShowSuccess("Video successfully emailed.",f,false)
}else{AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this video.",f,false)}},function(){AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this video.",f,false)
})});$(".create-shopping-list-from-detail-page").click(function(c){var b=AR.Analytics;var d=AR.ServerSideData.Get("sharedItemType");
var f=(AR.DetailPage.RecipeTools.IsMenu())?b.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsRecipe())?b.Action.Source.RecipePage:(AR.DetailPage.RecipeTools.IsWebLink())?b.Action.Source.WeblinkPage:b.Action.Source.ReferencePage;
b.RecordLayerOpenAction(b.Action.LayerName.ShoppingListCreate,b.Event.Start,f,b.Action.Type.ShoppingListCreate,d);ioc.Load("_dialogLauncher").CreateNewShoppingList(AR.ServerSideData.Get("currentItemTitle"),AR.ServerSideData.Get("currentShoppingListTitles"),function(e){b.RecordAction(AR.Analytics.Event.Complete,f,b.Action.Type.ShoppingListCreate,d);
$(".ddlSelectedShoppingListItem").append($("<option></option>").val(e.substring(e.indexOf("|^|")+3)).html(e.substring(0,e.indexOf("|^|"))).attr("selected","selected"));
AR.DetailPage.RecipeTools.AddToList("true");if(!($(".shopping-list-form").is(":hidden"))){AR.DetailPage.RecipeTools.Slide($(".shopping-list-form"),$("a.RTSL"),"#liAddToSL",true)
}AR.Loader.Hide()},function(){AR.MessageBox.ShowFailure("Sorry, your new shopping list could not be created.",null,false);AR.Loader.Hide()
})});$(".create-new-menu").click(function(c){var b=AR.Analytics;var d=(AR.DetailPage.RecipeTools.IsMenu())?b.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsWebLink())?b.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?b.Action.Source.ReferencePage:b.Action.Source.RecipePage;
b.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuCreate,AR.Analytics.Event.Start,d,b.Action.Type.MenuCreate,b.Action.Item.MenuPersonal);
ioc.Load("_dialogLauncher").CreateNewMenu(function(e){b.RecordAction(AR.Analytics.Event.Complete,d,b.Action.Type.MenuCreate,b.Action.Item.MenuPersonal);
AR.DetailPage.RecipeTools.AddItemToMenu(e.substring(e.indexOf(",")+1),true);$(".ddlSelectedMenuItem").append($("<option></option>").val(e.substring(e.indexOf(",")+1)).html(e.substring(0,e.indexOf(","))))
},function(){AR.MessageBox.ShowFailure("Sorry, but your new menu could not be created.",null,false)})});$(".calculate-servings").click(function(b){if(!AR.DetailPage.Servings.ValidateServings()){b.preventDefault();
$(".servings-amount").focus();AR.MessageBox.ShowWarning(AR.DetailPage.Servings.ServingsWarningMsg,null,false)}});$(".servings-amount").keydown(function(b){if(b.which==13){if(!AR.DetailPage.Servings.ValidateServings()){b.preventDefault();
b.stopPropagation();$(".servings-amount").focus();AR.MessageBox.ShowWarning(AR.DetailPage.Servings.ServingsWarningMsg,null,false)
}else{var d=$(".calculate-servings");var c=d.attr("href");if(typeof(c)!="undefined"&&c.substr(0,11)=="javascript:"){new Function(c.substr(11)).call(d.eq(0))
}}}}),$(".servings-amount").val($(".servings-hdnservings").val());$(".menudetail-sl-info").click(function(b){b.preventDefault();
var c=$(".menudetail-sl-content").is(":hidden")?AR.Analytics.Action.CustomLinkClick.MenuDetailSLExpand:AR.Analytics.Action.CustomLinkClick.MenuDetailSLCollapse;
AR.Analytics.RecordCustomLinkClick(c);AR.DetailPage.MenuDetails.ToggleContent($(".menudetail-sl-content"),$(".menudetail-sl-info"))
})});$(document).ready(function(){$("a.share-email").click(function(a){a.preventDefault();AR.DetailPage.RecipeTools.Slide($(".share-email-form"),$("a.RTSE"),"#liEmail",false)
});$("#addToRB").click(function(){AR.DetailPage.RecipeTools.AddToRB()});$(".add-item-to-default-shopping-list").click(function(){AR.DetailPage.RecipeTools.AddToList("false")
});$(".toolbox-add-to-my-menu").click(function(a){a.preventDefault();AR.DetailPage.RecipeTools.AddToMyMenus()});$(".menu-add-item-button").click(function(a){a.preventDefault();
AR.DetailPage.RecipeTools.AddItemToMenu($(".ddlSelectedMenuItem").val(),false)});$(".add-item-to-recipe-box").click(function(){AR.DetailPage.RecipeTools.AddToRB($(".fold-list").val())
});$(".add-item-to-shopping-list").click(function(){AR.DetailPage.RecipeTools.AddToList("false")})});(function(a){a.fn.slides=function(b){b=a.extend({},a.fn.slides.option,b);
return this.each(function(){a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var k=a(this),f=a(".slides_control",k),A=f.children().size(),B=f.children().outerWidth(),l=f.children().outerHeight(),y=b.start-1,j=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],r=b.effect.indexOf(",")<0?j:b.effect.replace(" ","").split(",")[1],p=0,w=0,q=0,g=0,o,c,e,v,h,m,t,u;
if(A<2){a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=true;b.slidesLoaded()});a("."+b.next+", ."+b.prev).fadeOut(0);
return false}function d(D,E,C){if(!c&&o){c=true;b.animationStart(g+1);switch(D){case"next":w=g;p=g+1;p=A===p?0:p;v=B*2;D=-B*2;
g=p;break;case"prev":w=g;p=g-1;p=p===-1?A-1:p;v=0;D=0;g=p;break;case"pagination":p=parseInt(C,10);w=a("."+b.paginationClass+" li."+b.currentClass+" a",k).attr("href").match("[^#/]+$");
if(p>w){v=B*2;D=-B*2}else{v=0;D=0}g=p;break}if(E==="fade"){if(b.crossfade){f.children(":eq("+p+")",k).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight){f.animate({height:f.children(":eq("+p+")",k).outerHeight()},b.autoHeightSpeed,function(){f.children(":eq("+w+")",k).css({display:"none",zIndex:0});
f.children(":eq("+p+")",k).css({zIndex:0});b.animationComplete(p+1);c=false})}else{f.children(":eq("+w+")",k).css({display:"none",zIndex:0});
f.children(":eq("+p+")",k).css({zIndex:0});b.animationComplete(p+1);c=false}})}else{f.children(":eq("+w+")",k).fadeOut(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight){f.animate({height:f.children(":eq("+p+")",k).outerHeight()},b.autoHeightSpeed,function(){f.children(":eq("+p+")",k).fadeIn(b.fadeSpeed,b.fadeEasing)
})}else{f.children(":eq("+p+")",k).fadeIn(b.fadeSpeed,b.fadeEasing,function(){if(a.browser.msie){a(this).get(0).style.removeAttribute("filter")
}})}b.animationComplete(p+1);c=false})}}else{f.children(":eq("+p+")").css({left:v,display:"block"});if(b.autoHeight){f.animate({left:D,height:f.children(":eq("+p+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){f.css({left:-B});
f.children(":eq("+p+")").css({left:B,zIndex:5});f.children(":eq("+w+")").css({left:B,display:"none",zIndex:0});b.animationComplete(p+1);
c=false})}else{f.animate({left:D},b.slideSpeed,b.slideEasing,function(){f.css({left:-B});f.children(":eq("+p+")").css({left:B,zIndex:0});
f.children(":eq("+w+")").css({left:B,display:"none",zIndex:0});b.animationComplete(p+1);c=false})}}if(b.pagination){a("."+b.paginationClass+" li."+b.currentClass,k).removeClass(b.currentClass);
a("."+b.paginationClass+" li:eq("+p+")",k).addClass(b.currentClass)}}}function z(){clearInterval(k.data("interval"))}function s(){if(b.pause){clearTimeout(k.data("pause"));
clearInterval(k.data("interval"));t=setTimeout(function(){clearTimeout(k.data("pause"));u=setInterval(function(){d("next",j)},b.play);
k.data("interval",u)},b.pause);k.data("pause",t)}else{z()}}if(A<2){return}if(y<0){y=0}if(y>A){y=A-1}if(b.start){g=y}if(b.randomize){f.randomize()
}a("."+b.container,k).css({overflow:"hidden",position:"relative"});f.children().css({position:"absolute",top:0,left:f.children().outerWidth(),zIndex:0,display:"none"});
f.css({position:"relative",width:(B*3),height:l,left:-B});a("."+b.container,k).css({display:"block"});if(b.autoHeight){f.children().css({height:"auto"});
f.animate({height:f.children(":eq("+y+")").outerHeight()},b.autoHeightSpeed)}if(b.preload&&f.find("img:eq("+y+")").length){a("."+b.container,k).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});
var n=f.find("img:eq("+y+")").attr("src")+"?"+(new Date()).getTime();if(a("img",k).parent().attr("class")!="slides_control"){m=f.children(":eq(0)")[0].tagName.toLowerCase()
}else{m=f.find("img:eq("+y+")")}f.find("img:eq("+y+")").attr("src",n).load(function(){f.find(m+":eq("+y+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:0});
a("."+b.container,k).css({background:""});o=true;b.slidesLoaded()})})}else{f.children(":eq("+y+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=true;
b.slidesLoaded()})}if(b.bigTarget){f.children().css({cursor:"pointer"});f.children().click(function(){d("next",j);return false
})}if(b.hoverPause&&b.play){f.bind("mouseover",function(){z()});f.bind("mouseleave",function(){s()})}if(b.generateNextPrev){a("."+b.container,k).before('<a href="#" class="'+b.prev+'"></a>');
a("."+b.prev,k).before('<a href="#" class="'+b.next+'"></a>')}a("."+b.next,k).click(function(C){C.preventDefault();if(b.play){s()
}d("next",j)});a("."+b.prev,k).click(function(C){C.preventDefault();if(b.play){s()}d("prev",j)});if(b.generatePagination){if(b.prependPagination){k.prepend("<ul class="+b.paginationClass+"></ul>")
}else{k.append("<ul class="+b.paginationClass+"></ul>")}f.children().each(function(){a("."+b.paginationClass,k).append('<li><a href="#'+q+'">'+(q+1)+"</a></li>");
q++})}else{a("."+b.paginationClass+" li a",k).each(function(){a(this).attr("href","#"+q);q++})}a("."+b.paginationClass+" li:eq("+y+")",k).addClass(b.currentClass);
a("."+b.paginationClass+" li a",k).click(function(){if(b.play){s()}e=a(this).attr("href").match("[^#/]+$");if(g!=e){d("pagination",r,e)
}return false});a("a.link",k).click(function(){if(b.play){s()}e=a(this).attr("href").match("[^#/]+$")-1;if(g!=e){d("pagination",r,e)
}return false});if(b.play){u=setInterval(function(){d("next",j)},b.play);k.data("interval",u)}})};a.fn.slides.option={preload:false,preloadImage:"http://images.media-allrecipes.com/ar/video/home/loading.gif",container:"slides_container",generateNextPrev:false,next:"next",prev:"prev",pagination:true,generatePagination:true,prependPagination:false,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};
a.fn.randomize=function(b){function c(){return(Math.round(Math.random())-0.5)}return(a(this).each(function(){var e=a(this);var d=e.children();
var f=d.length;if(f>1){d.hide();var g=[];for(i=0;i<f;i++){g[g.length]=i}g=g.sort(c);a.each(g,function(m,n){var h=d.eq(n);var l=h.clone(true);
l.show().appendTo(e);if(b!==undefined){b(h,l)}h.remove()})}}))}})(jQuery);AR.Core={};AR.Core.Utilities={};$(document).ready(function(){$("head").data("VisitorID",AR.VisitorInfo.VisitorID())
});$.fn.trim=function(a){if(a===undefined){a=$(this)[0]}a=a.replace(/^\s\s*/,""),ws=/\s/,i=a.length;while(ws.test(a.charAt(--i))){}return a.slice(0,i+1)
};(function(a){a.QueryString=(function(c){if(c==""){return{}}var d={};for(var e=0;e<c.length;++e){var f=c[e].split("=");if(f.length!=2){continue
}d[f[0]]=decodeURIComponent(f[1].replace(/\+/g," "))}return d})(window.location.search.substr(1).split("&"))})(jQuery);AR.Core.Utilities={Formats:{SelectorByName:"[name={0}]",SelectByDataAttribute:"[data-{0}={1}]"},GetSelectorByName:function(a){return this.Formats.SelectorByName.replace("{0}",a)
},GetSelectorByDataAttribute:function(a,b){return this.Formats.SelectByDataAttribute.replace("{0}",a).replace("{1}",b)},ScrollTo:function(d,c){var b;
var a=false;if(typeof(d)=="number"){b=parseInt(d)}else{if(d.length){b=d.offset().top}}$(document).trigger("scrollstart");$("html,body").animate({scrollTop:b},1000,function(){$(document).trigger("scrollstart");
setTimeout(function(){$(document).trigger("scrollstop");if(c&&typeof(c)==="function"&&a==false){c();a=true}},0)})},ShowTextOverflow:function(g,e){var c=e+"id";
var b=$(g).data(c);var d=globalUtils.GetSelectorByDataAttribute(c,b);var h=$("."+e+"_overflow"+d);var f=$("."+e+"_morelink"+d);
var a=$("."+e+"_ellipsis"+d);a.hide();f.hide();h.show()},HideTextOverflow:function(h,e){var j=$(h).text();var c=e+"id";var b=$(h).data(c);
var d=globalUtils.GetSelectorByDataAttribute(c,b);var g=$("."+e+"_overflow"+d);var f=$("."+e+"_morelink"+d);var a=$("."+e+"_ellipsis"+d);
if(j.length==0||j=='"'){f.hide();a.hide()}else{g.hide()}},GetOrientation:function(){var a=$.event.special.orientationchange.orientation();
return a},GetScreenWidth:function(){var a=$.event.special.orientationchange.orientation(),c=a==="portrait",e=c?320:480,d=c?screen.availHeight:screen.availWidth,f=Math.max(e,$(window).width()),b=Math.min(d,f);
return b},Truncate:function(c,d,a){var b="";if(c.length>d){if(a){b+="&quot;"}b+=c.substr(0,d);b+="&hellip;";if(a){b+="&quot;"
}}else{if(a){b="&quot;"+c+"&quot;"}else{b=c}}return b},AddHoursToDate:function(a,b){a.setHours(a.getHours()+b);return a},BoolToString:function(a){return(a==true||a.toString().toLowerCase()=="true")?"true":"false"
},ButtonEnable:function(c,a,b){if(a){$(c).removeClass("btn-disabled").removeAttr("disabled");$(c).unbind("click").bind("click",b)
}else{$(c).addClass("btn-disabled").attr("disabled",true);$(c).unbind("click")}},ExecuteFunctionByName:function(e,a){var c=window;
var b=e.split(".");for(var f=0;f<b.length;f++){var d=c[b[f]];if(typeof d==="function"){d(a)}c=d}},DefaultButtonExtender:function(d,b,c,a){if(c==null||c==undefined){c="body"
}if(a==null||a==undefined){a="body"}$("#"+d,"#"+c).keypress(function(f){if(f.which==13){$("#"+b,"#"+a).click()}})},OmniWaitCursor:function(){$("*").css("cursor","wait")
},AttributeEncode:function(a){return(""+a).replace(/'/g,"&quot;").replace(/"/g,"&quot;")}};(function(a){a.fn.textfill=function(b){a.each(this,function(){var e=a("span:visible:first",this);
var c=a(this).height()-2;var d=a(this).width()-10;var f=e.height();var g=e.width();var h=false;if(e.length>0){while((f>c||g>d)){if(e.html()!==null){h=true;
e.html(e.html().substring(0,e.html().length-1));f=e.height();g=e.width()}}if(h){e.html(e.html().substring(0,e.html().length-2)+String.fromCharCode(8230))
}}return this})}})(jQuery);AR.Core.Utilities.Validation={IsBlank:function(a){return(!a||a.length==0)},IsEmail:function(a){var c=/^((\"[^\"\f\n\r\t\v\b]+\")|([\w\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+(\.[\w\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+)*))@((\[(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))\])|(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))|((([A-Za-z0-9\-])+\.)+[A-Za-z\-]+))$/;
var b=a.replace(",",";").replace("\n",";").replace(" ",";").replace(";;",";").split(";");for(x=0;x<b.length;x++){if(!c.test(b[x])){return false
}}return true}};AR.Core.Stars={GetRatingAndWidthFromMouseCoord:function(c,a){var f=c.width()/5;var g=f*1;var h=f*2;var j=f*3;
var k=f*4;var l=f*5;var b=0;var d=0;var m=a.pageX-c.offset().left;if(m>0&&m<=g){d=g;b=1}else{if(m>g&&m<=h){d=h;b=2}else{if(m>h&&m<=j){d=j;
b=3}else{if(m>j&&m<=k){d=k;b=4}else{if(m>k&&m<=l){d=l;b=5}}}}}return{rating:b,width:d}},GetWidthFromRating:function(b,a){var c=b.width()/5;
return c*a}};$(document).ready(function(){AR.Core.Reviews.zoneRecipe=$("#zoneRecipe");AR.Core.Reviews.zoneReviews=$("#reviewsection",this.zoneRecipe);
AR.Core.Reviews.layerReviews=$(".modal-recipe-reviews-carousel")});AR.Core.Reviews={zoneRecipe:null,zoneReviews:null,layerReviews:null,OpenReviewDialog:function(a){if(a){a.preventDefault();
if(a.target){el=a.target}else{if(a.srcElement){el=a.srcElement}}}else{el=null}var d=AR.ReviewCarousel.Options.LoadIndexFromDataAttribute?AR.ServerSideData.Get($(el).data("reviewID")):AR.ServerSideData.GetByDom(el);
if(d){if(d.index===undefined){d=AR.ServerSideData.Get($("#ratingRollup",this.zoneReviews).data("reviewID"))}var b=parseInt(d.index);
if(isNaN(b)){b=0}AR.ReviewCarousel.Data.CurrentReviewIndex=b;AR.Core.Reviews.LoadReviewLayer();if(d.source=="review"){var c=(el==null)?AR.Analytics.Action.LinkName.RecipeReviewLayerReviews:AR.Analytics.Action.LinkName.RecipeReviewLayerMoreReviews;
AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerBlock,c)}else{AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerHeader,"")
}}},OpenLoadingLayer:function(a,b){AR.Core.Reviews.ToggleWaitingTreatment(true);if(!$(AR.ReviewCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.ReviewCarousel.Options.ContainerSelector)
}if(b==null||b==undefined){a()}else{a(null,b)}},ToggleWaitingTreatment:function(a){if(a){$("#zoneReview").hide();$("#divReviewModalLoading").show()
}else{$("#zoneReview").show();$("#divReviewModalLoading").hide()}},LoadReviewLayer:function(){var e=$("div.searchSortBy ul li a[class='active']",AR.Core.Reviews.layerReviews).data("sort");
if(e==null||e==undefined){e=4}var a=$("#zoneReview",this.zoneRecipe);var c=AR.ReviewCarousel.Data.CurrentReviewIndex;var b=function(j){var g=false;
var f="";var k=AR.ShouldLogResponseCode(j.ResponseCode);if(j.ResponseCode==AR.ResponseCode.Success){var h=j.Data.PageNumber==AR.ReviewCarousel.GetCurrentPageNumber();
AR.ReviewCarousel.Data.TotalRecords=j.Data.TotalRecords;if(AR.ReviewCarousel.Data.Reviews==null){AR.ReviewCarousel.Data.Reviews=new Array(j.Data.TotalRecords)
}if(j.Data.PageNumber>0&&j.Data.Items.length>0){AR.ReviewCarousel.StorePageData(j.Data.Items,j.Data.PageNumber);if(h){AR.Core.Reviews.LoadReviewLayer();
AR.Core.Reviews.ToggleWaitingTreatment(false)}}else{g=true;k=true}}else{g=true}if(g){AR.Dialog.CloseModalBox();AR.MessageBox.ShowFailure(AR.ReviewCarousel.Config.ErrorLoadingMessage,AR.ReviewCarousel.Config.MessageBoxSelector);
if(k){AR.LogErrorEx({ItemID:AR.LogEval("AR.ReviewCarousel.Data.ItemID"),ItemType:AR.LogEval("AR.ReviewCarousel.Data.ItemType")},"ReviewCarousel","Error in GetReviewsPaged_callback.")
}}AR.Cursor.SetDefault()};var d=function(){if(!AR.ReviewCarousel.Config.DynamicMode){if(c==0&&AR.ReviewCarousel.Data.TotalRecords>AR.ReviewCarousel.Data.Reviews.length){$("#lnkScrollReviewLeft").addClass("left-arrow-inactive")
}else{$("#lnkScrollReviewLeft").removeClass("left-arrow-inactive")}}if(AR.ReviewCarousel.Data.TotalRecords>1){$("#currentReview",a).text(AR.ReviewCarousel.Data.CurrentReviewIndex+1);
$("#totalReviews",a).text(AR.ReviewCarousel.Data.TotalRecords);$(".paging",a).show()}else{$(".paging",a).hide()}};d();if(AR.ReviewCarousel.Data.Reviews[c]){this.SetReviewLayerContent(AR.ReviewCarousel.Data.Reviews[c])
}else{if(AR.ReviewCarousel.Config.DynamicMode){AR.ReviewCarousel.GetDataFromService(AR.ReviewCarousel.GetCurrentPageNumber(),e,b)
}else{AR.ReviewCarousel.Navigate("reviews.aspx?SortBy=Helpfulness&Direction=Descending&Page=2")}}if(AR.ReviewCarousel.Config.DynamicMode&&AR.ReviewCarousel.Data.TotalRecords>0){AR.ReviewCarousel.PreLoadIndexData(AR.ReviewCarousel.GetNextReviewIndex(),e,b);
AR.ReviewCarousel.PreLoadIndexData(AR.ReviewCarousel.GetPreviousReviewIndex(),e,b)}},IncrementHelpfulCounter:function(){$("*").css("cursor","wait");
var a=$("#lnkReviewHelpful",".modal-recipe-reviews-carousel");var b=a.data("reviewID");if(b){AR.ClientService.SuppressNextLoaderChange();
AR.ClientService.IncrementReviewWasHelpful(b,function(d){if(d.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess("Thanks for voting! Your vote will be added soon.","#msgHelpful",false);
AR.Core.Utilities.ButtonEnable(a,false);var c=parseInt($("#helpfulCount").text());c++;$("#helpfulCount").text(c);AR.ReviewCarousel.Data.Reviews[AR.ReviewCarousel.Data.CurrentReviewIndex].HelpfulCount=c
}else{AR.MessageBox.ShowFailure("Oops, something went wrong. Please try again.","#msgHelpful",false)}$("*").css("cursor","default")
})}},SetReviewLayerContent:function(c){if(c){var a=(c.User.CustomUrlPiece)?AR.ClientUrlProvider.ResolveUrl("~/Cook/"+c.User.CustomUrlPiece):AR.ClientUrlProvider.ResolveUrl("~/Cook/"+c.User.ObfuscatedUserID);
var b=this.layerReviews;var d=AR.Core.Stars.GetWidthFromRating($(".rating-stars-img",b),c.Rating);$("#rating",b).width(d);AR.ReviewCarousel.SetLinkOrSpan("#userNameSpan","#userNameLink",c.User.DisplayName,(c.User.ObfuscatedUserID>0)?a:null);
$("#userImage",b).attr("src",AR.ClientUrlProvider.ResolveImageUrl(((c.User.ProfileImageUrl!="")?c.User.ProfileImageUrl:"/ar/topnav/nopic50notext.png")));
$("#dateUpdated",b).text(c.Date);$("#reviewText",b).text(c.Text);$("#lnkReviewHelpful",b).data("reviewID",c.ID);$("#helpfulCount",b).text(c.HelpfulCount);
AR.Core.Utilities.ButtonEnable($("#lnkReviewHelpful",".modal-recipe-reviews-carousel"),true,function(){AR.Core.Reviews.IncrementHelpfulCounter()
});AR.AdDfpTags.RefreshAd("div-gpt-ad-recipereview");if(!$(AR.ReviewCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.ReviewCarousel.Options.ContainerSelector)
}}}};AR.Core=AR.Core||{};AR.Core.Nutrition=AR.Core.Nutrition||{};AR.Core.Nutrition={ToggleDetail:function(c){var e=$("#zoneNutrition",$("#zoneRecipe"));
var a=$("#nutritionSeeMore",e);var d=$("#nutritionDetail",e);var b=$("#eshaLink",e);b.hide();d.slideToggle(function(){if(d.is(":visible")){a.text("See Less");
$("#eshaLinkDetail",e).append(b);if(c===true){AR.Core.Utilities.ScrollTo(e)}}else{a.text("See More");$("#eshaLinkSummary",e).append(b)
}b.show()})}};AR.DetailPage.RecipeTools={IsRecipe:function(){if(AR.ServerSideData.Data.IsRecipe==undefined){AR.ServerSideData.Data.IsRecipe=true
}return AR.ServerSideData.Data.IsRecipe},IsMenu:function(){if(AR.ServerSideData.Data.IsMenu==undefined){AR.ServerSideData.Data.IsMenu=false
}return AR.ServerSideData.Data.IsMenu},IsWebLink:function(){return AR.ServerSideData.Data.IsWebLink},IsWebReference:function(){return AR.ServerSideData.Data.IsWebReference
},Slide:function(a,b,c,e){if(a.is(":hidden")){$("img",b).attr("src",AR.ImageServer+AR.DetailPage.MinusImageURL);var d="none";
if(b.hasClass("menu")){d=b.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.MenuDetailActSLExpand:"none"}if(b.hasClass("recipe")){d=b.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.RecipeDetailSLExpand:"none"
}if(d!="none"){AR.Analytics.RecordCustomLinkClick(d)}if(e){$(c).removeClass("bordbot")}a.slideDown(300)}else{$("img",b).attr("src",AR.ImageServer+AR.DetailPage.PlusImageURL);
var d="none";if(b.hasClass("menu")){d=b.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.MenuDetailActSLCollapse:"none"}if(b.hasClass("recipe")){d=b.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.RecipeDetailSLCollapse:"none"
}if(d!="none"){AR.Analytics.RecordCustomLinkClick(d)}a.slideUp(300,function(){if(e){$(c).addClass("bordbot")}})}},AddToRB:function(c,e,a){if(AR.VisitorInfo.IsLoggedIn()){var b=10000;
AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipePage,AR.Analytics.Action.Type.RecipeBoxAdd,AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType));
var d=(c)?c.toString():"0";AR.ClientService.SaveToRecipeBox(AR.TypeSpecificID.toString(),AR.DetailPage.RecipeTools.IsRecipe(),AR.DetailPage.RecipeTools.IsMenu(),d,function(f){if(f.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(f.Message,"#msgLabel",false,b);
if(AR.RBM){AR.RBM.Add($("#itemTitle").text(),document.URL,AR.ServerSideData.Get("Item_RateAndReview_Rating"),e)}AR.Loader.Hide();
AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipePage,AR.Analytics.Action.Type.RecipeBoxAdd,AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType))
}else{AR.MessageBox.ShowFailure(f.Message,"#msgLabel",false,b);if(AR.ShouldLogResponseCode(f.ResponseCode)){AR.LogErrorEx({IsRecipe:AR.LogEval("AR.DetailPage.RecipeTools.IsRecipe()"),FolderID:d},"detail-page.js","Error adding item to RecipeBox.")
}}if(c){$("a.RTRB").trigger("click")}if(a){a()}})}},AddToMyMenus:function(a){if(AR.VisitorInfo.IsLoggedIn()){AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.MenuDetailMenuAdd);
AR.ClientService.SaveToRecipeBox(AR.TypeSpecificID.toString(),this.IsRecipe(),this.IsMenu(),0,function(b){if(b.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(b.Message,"#msgLabel");
if(AR.RBM){AR.RBM.AddMenu($(".menuDetailTitle").text(),document.URL)}AR.Loader.Hide();AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.MenuDetail,AR.Analytics.Action.Type.MyMenuAdd,AR.ServerSideData.Get("sharedItemType"))
}else{AR.MessageBox.ShowFailure(b.Message,"#msgLabel");if(AR.ShouldLogResponseCode(b.ResponseCode)){AR.LogErrorEx({IsMenu:AR.LogEval("AR.DetailPage.RecipeTools.IsMenu()"),FolderID:0},"detail-page.js","Error adding menu to MY Menus from menu detail page.")
}}if(a){a()}})}},AddItemToMenu:function(f,b){var a=AR.Analytics;if(AR.VisitorInfo.IsLoggedIn()){if(AR.RBM&&!AR.RBM.MenuExists(f)){AR.RBM.IncrementMenuCount()
}var d=$(".yield").text().toString().toLowerCase().replace(" servings","");var c=$(".servings-amount").val();var e=(c&&(c!=d))?c:d;
AR.ClientService.AddItemToMenu(AR.VisitorInfo._data._ID.toString(),f,AR.TypeSpecificID.toString(),AR.ServerSideData.Data.ItemType,e,function(g){if(g.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(g.Message,"#msgLabel");
if(AR.RBM){AR.RBM.AddToMenu(g.Data,true)}AR.Loader.Hide();var h=(AR.DetailPage.RecipeTools.IsMenu())?a.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsRecipe())?a.Action.Source.RecipePage:(AR.DetailPage.RecipeTools.IsWebLink())?a.Action.Source.WeblinkPage:a.Action.Source.ReferencePage;
a.RecordAction(AR.Analytics.Event.Complete,h,a.Action.Type.MenuAdd,AR.ServerSideData.Get("sharedItemType"))}else{AR.MessageBox.ShowFailure(g.Message,"#msgLabel");
if(AR.ShouldLogResponseCode(g.ResponseCode)){AR.LogErrorEx({IsMenu:AR.LogEval("AR.DetailPage.RecipeTools.IsMenu()"),FolderID:0},"detail-page.js","Error adding item to menu from "+window.location.pathname)
}}});if(!($(".menu-box-form").is(":hidden"))){$("a.RTMN").trigger("click")}}},AddToList:function(b,f,j,d,c){if(f==null||f==undefined){f=".shopping-list option:selected"
}if(j==null||j==undefined){j=".servings-amount"}if(AR.VisitorInfo.IsLoggedIn()){var g=10000;if(b=="false"){var k=(AR.DetailPage.RecipeTools.IsMenu())?AR.Analytics.Action.Source.MenuDetail:AR.Analytics.Action.Source.RecipePage;
var l=(AR.DetailPage.RecipeTools.IsMenu())?AR.Analytics.Action.Type.ShoppingListAddMenu:AR.Analytics.Action.Type.ShoppingListAddRecipe;
var a=(AR.DetailPage.RecipeTools.IsMenu())?AR.ServerSideData.Get("sharedItemType"):AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType);
if(AR.DetailPage.RecipeTools.IsMenu()){AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.ShoppingListAddMenu)
}}var e=$(f);var h=$(j).val();AR.ClientService.AddToShoppingList(e.val(),AR.ServerSideData.Data.IsRecipe,AR.ServerSideData.Data.IsMenu,AR.TypeSpecificID.toString(),(h)?h:0,function(m){if(m.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(m.Message,"#msgLabel",false,g);
if(b=="false"){AR.Analytics.SendBeacon({pev2:"Add Recipe to Shopping List",prop34:"Save:ShoppingList",eVar7:k,eVar8:l,eVar9:a,linkTrackVars:"eVar7,eVar8,eVar9,prop34,events",events:"event9,event10",linkTrackEvents:"event9,event10"})
}if(AR.RBM){AR.RBM.AddToList(e.val(),e.text(),d)}AR.Loader.Hide()}else{AR.MessageBox.ShowFailure(m.Message,"#msgLabel",false,g);
if(AR.ShouldLogResponseCode(m.ResponseCode)){AR.LogErrorEx({IsRecipe:AR.LogEval("AR.DetailPage.RecipeTools.IsRecipe()"),Servings:h,ShoppingListID:AR.LogEval("$('.shopping-list').val()")},"AddToList","Error adding item to Shopping List.")
}AR.Loader.Hide()}if(e&&!($(".shopping-list-form").is(":hidden"))){AR.DetailPage.RecipeTools.Slide($(".shopping-list-form"),$("a.RTSL"),"#liAddToSL",true)
}if(c){c()}})}}};$(document).ready(function(){var e=100;var f=100;var d=$("#toolbar");var a=$("#zoneIngredients");$(".save-to-menu-arrow",d).click(function(g){g.stopPropagation();
var h=AR.TypeSpecificID.toString();if(AR.VisitorInfo.IsSupportingMember()){$("#menu-recipebox",d).hide(e,function(){$("#menu-shoppinglist",d).hide(e,function(){$("#menu-menu",d).slideToggle(f);
$(this).toggleClass("arrowGrayActive")})})}else{AR.Analytics.SendBeacon({pev2:"Create Menu",prop34:"Create Menu"});location.href=AR.ClientUrlProvider.ResolveUrl("/my/menus/planner.aspx?itemtype=1&id="+h)
}});var b=function(n,l,m,k,j){var h=function(p){var o=$("#addbtn-menu",p);if(o.is(":visible")){$("#menu-menu",p).hide()}$(this).removeClass("arrowGrayActive")
};var g=function(p){var o=AR.Analytics;if(p.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(p.Message,"#msgLabel");
if(AR.RBM){AR.RBM.AddToMenu(p.Data,false)}AR.Loader.Hide();var q=(AR.DetailPage.RecipeTools.IsMenu())?o.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsRecipe())?o.Action.Source.RecipePage:(AR.DetailPage.RecipeTools.IsWebLink())?o.Action.Source.WeblinkPage:o.Action.Source.ReferencePage;
o.SendBeacon({pev2:o.Action.Type.MenuAdd,eVar7:q,eVar8:o.Action.Type.MenuAdd,eVar9:AR.ServerSideData.Get("sharedItemType"),linkTrackVars:"eVar7,eVar8,eVar9,events",events:"event9,event10",linkTrackEvents:"event9,event10"})
}else{AR.MessageBox.ShowFailure(p.Message,"#msgLabel");if(AR.ShouldLogResponseCode(p.ResponseCode)){AR.LogErrorEx({IsMenu:AR.LogEval("AR.DetailPage.RecipeTools.IsMenu()"),FolderID:0},"/core/recipe/detail/toolbar/js/menu.js","Error adding item to menu from "+window.location.pathname)
}}h(j)};if(AR.VisitorInfo.IsLoggedIn()){AR.ClientService.AddItemToMenu(n,l,m,AR.ServerSideData.Data.ItemType,k,g)}};$(".save-to-menu,#addbtn-menu",d).click(function(){var j=AR.TypeSpecificID.toString();
if(AR.VisitorInfo.IsSupportingMember()){var k=AR.VisitorInfo._data._ID.toString();var h=$("#menu-menu option:selected",d).val();
var g=a.data("currentservings");b(k,h,j,g,d)}else{AR.Analytics.SendBeacon({pev2:"Create Menu",prop34:"Create Menu"});location.href=AR.ClientUrlProvider.ResolveUrl("/my/menus/planner.aspx?itemtype=1&id="+j)
}});var c=function(h){var g=AR.Analytics;var k=(AR.DetailPage.RecipeTools.IsMenu())?g.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsWebLink())?g.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?g.Action.Source.ReferencePage:g.Action.Source.RecipePage;
g.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuCreate,AR.Analytics.Event.Start,k,g.Action.Type.MenuCreate,g.Action.Item.MenuPersonal);
var l=function(m){g.RecordAction(AR.Analytics.Event.Complete,k,g.Action.Type.MenuCreate,g.Action.Item.MenuPersonal);$("#menu-menu select",h).append($("<option></option>").val(m.substring(m.indexOf(",")+1)).html(m.substring(0,m.indexOf(","))).attr("selected","selected"));
var q=AR.VisitorInfo._data._ID.toString();var p=AR.TypeSpecificID.toString();var o=$("#menu-menu option:selected",h).val();var n=a.data("currentservings");
b(q,o,p,n,h)};var j=function(){AR.MessageBox.ShowFailure("Sorry, but your new menu could not be created.",null,false)};ioc.Load("_dialogLauncher").CreateNewMenu(l,j)
};$("#newbtn-menu",d).click(function(){$("#menu-menu",d).slideUp(f,function(){$(".save-to-menu-arrow",d).removeClass("arrowGrayActive")
});c(d)})});$(document).ready(function(){var c=100;var d=100;var b=$("#toolbar");$(".save-to-recipebox",b).click(function(f){AR.DetailPage.RecipeTools.AddToRB(0,false)
});$(".save-to-recipebox-arrow",b).click(function(f){f.stopPropagation();$("#menu-shoppinglist",b).hide(c,function(){$("#menu-menu",b).hide(c,function(){$("#menu-recipebox",b).slideToggle(d);
$(this).toggleClass("arrowWhiteActive")})})});var a=function(e){var f=$("#menu-recipebox select",e).val();AR.DetailPage.RecipeTools.AddToRB(f,false,function(h){var g=$("#addbtn-recipebox",h);
if(g.is(":visible")){$("#menu-recipebox",h).hide(d)}$(this).removeClass("arrowWhiteActive")})};$("#addbtn-recipebox",b).click(function(f){a(b)
})});$(document).ready(function(){var e=500;var a=$("#toolbar");var c=function(){$("#menu-recipebox").slideUp(e,function(){$(".save-to-recipebox-arrow").removeClass("arrowWhiteActive")
})};var d=function(){$("#menu-shoppinglist").slideUp(e,function(){$(".save-to-shoppinglist-arrow").removeClass("arrowGrayActive")
})};var b=function(){$("#menu-menu").slideUp(e,function(){$(".save-to-menu-arrow").removeClass("arrowGrayActive")})};$("body").bind("click",function(f){var g=$(f.target).parents();
if(!g.hasClass("toolbar-recipebox")){c()}if(!g.hasClass("toolbar-shoppinglist")){d()}if(!g.hasClass("toolbar-menu")){b()}})});
$(document).ready(function(){var c=500;var a=$("#toolbar");var d=$("#zoneRecipe");$("#sendViaEmail1",a).click(function(f){f.preventDefault();
b()});$("#send-btn",a).click(function(){$("#toolbar-menu-send",a).slideToggle(c)});var b=function(){var e=AR.Analytics;var h=$("#sendViaEmail1",a);
var j=h.data("recipe-detail-brandedemail");var q=$("head").data("VisitorID");var k=(d.data("itemtype"))?d.data("itemtype"):"";
var l=(d.data("itemtypeid"))?d.data("itemtypeid"):"0";var p=AR.ServerSideData.Get("sharedItemType");var n=(d.data("typespecificid"))?d.data("typespecificid"):"0";
var m=(d.data("data-recipe-detail-merchdate"))?d.data("data-recipe-detail-merchdate"):"";var f=(AR.DetailPage.RecipeTools.IsWebLink())?e.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?e.Action.Source.ReferencePage:e.Action.Source.RecipePage;
var g=(AR.DetailPage.RecipeTools.IsWebLink())?e.Action.Type.EmailWeblink:(AR.DetailPage.RecipeTools.IsWebReference())?e.Action.Type.EmailReference:(j)?e.Action.Type.EmailRecipeBranded:e.Action.Type.EmailRecipe;
var o=(k=="Recipe")?null:"#msgLabel";if(j){AR.Analytics.RecordActionOption(AR.TypeSpecificID,e.Action.Type.EmailRecipeBranded)
}ioc.Load("_dialogLauncher").MailRecipe(n,q,m,AR.TypeSpecificID,k,p,f,g,j,function(r){if(r){e.RecordAction(e.Event.Complete,f,g,AR.ServerSideData.Get("sharedItemType"),n);
if(r!==true){window.location.href=r}AR.MessageBox.ShowSuccess("Recipe successfully emailed.","#msgLabel",false)}else{AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this recipe.","#msgLabel",false)
}$("*").css("cursor","default")},function(){AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this recipe.","#msgLabel",false)
})}});$(document).ready(function(){var d=100;var e=100;var c=$("#toolbar");$(".save-to-shoppinglist-arrow",c).click(function(f){f.stopPropagation();
$("#menu-recipebox",c).hide(d,function(){$("#menu-menu",c).hide(d,function(){$("#menu-shoppinglist",c).slideToggle(e);$(this).toggleClass("arrowGrayActive")
})})});var a=function(f,g){AR.DetailPage.RecipeTools.AddToList(g,"#menu-shoppinglist option:selected","#zoneServings input.servings-amount",false,function(j){var h=$("#addbtn-shoppinglist",j);
if(h.is(":visible")){$("#menu-shoppinglist",j).hide(e)}$(this).removeClass("arrowGrayActive")})};$(".save-to-shoppinglist, #addbtn-shoppinglist",c).click(function(){a(c,"false")
});var b=function(g){var f=AR.Analytics;var j=AR.ServerSideData.Get("sharedItemType");var k=(AR.DetailPage.RecipeTools.IsMenu())?f.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsRecipe())?f.Action.Source.RecipePage:(AR.DetailPage.RecipeTools.IsWebLink())?f.Action.Source.WeblinkPage:f.Action.Source.ReferencePage;
f.RecordLayerOpenAction(f.Action.LayerName.ShoppingListCreate,f.Event.Start,k,f.Action.Type.ShoppingListCreate,j);var l=function(m){f.RecordAction(AR.Analytics.Event.Complete,k,f.Action.Type.ShoppingListCreate,j);
$("#ddlShoppingLists",g).append($("<option></option>").val(m.substring(m.indexOf("|^|")+3)).html(m.substring(0,m.indexOf("|^|"))).attr("selected","selected"));
a(g,"true");AR.Loader.Hide()};var h=function(){AR.MessageBox.ShowFailure("Sorry, your new shopping list could not be created.",null,false);
AR.Loader.Hide()};ioc.Load("_dialogLauncher").CreateNewShoppingList(AR.ServerSideData.Get("currentItemTitle"),AR.ServerSideData.Get("currentShoppingListTitles"),l,h)
};$("#newbtn-shoppinglist",c).click(function(){$("#menu-shoppinglist",c).slideUp(e,function(){$(".save-to-shoppinglist-arrow").removeClass("arrowGrayActive")
});b(c)})});$(document).ready(function(){var m=$("#zoneRecipe");var l=$("#zoneIngredients",m);var f=$(".checkbox-formatted",l);
var b=$("#btnIngredientsAddChecked",l);$("#changeServings",l).click(function(){$("#zoneServings",l).slideToggle()});$("#lnkCalculate",l).click(function(n){if(!j()){n.preventDefault();
$(".servings-amount").focus();AR.MessageBox.ShowWarning(k,"#msgServings",true);return false}else{return g()}});$("input",f).unbind("change").bind("change",function(){e()
});$("#btnIngredientsCheckAll",l).unbind("click").bind("click",function(){d()});$("#txtServings",l).keypress(function(n){if(n.keyCode==13){n.preventDefault();
if(!j()){$(".servings-amount").focus();AR.MessageBox.ShowWarning(k,"#msgServings",true)}else{g()}return false}});var h=function(){var o=l.data("originalservings");
var n=l.data("currentservings");if(n!=o){$("#zoneServings",l).show();$("#originalServings",l).text(o);$("#scaledNotice",l).show();
AR.MessageBox.ShowSuccess("Ingredients list now reflects the new serving size.","#msgServings",true);AR.MessageBox.ShowInfo("NOTE: Recipe directions are for the original serving size of "+o+".","#msgDirections",true)
}else{$("#msgServings",l).hide();$("#msgDirections",l).hide()}};var j=function(){var o=1;var n=300;var p=/^\d+$/;var q=$(".amountServings").val();
if(!p.test(q)){return false}else{return(q>=o&&q<=n)}};var g=function(){var o=parseInt($("#txtServings",l).val()),n=$("#rblMetric",l).is(":checked");
if(isNaN(o)){AR.MessageBox.ShowFailure("Please enter a serving size between 1 and 300.","#msgServings",false);return false}else{if(o==0){AR.MessageBox.ShowFailure("Serving size must be between 1 and 300.","#msgServings",false);
return false}else{if(o>300){AR.MessageBox.ShowFailure("Feeding a small army? Sorry, serving size must be between 1 and 300.","#msgServings",false);
return false}else{var p=AR.ClientUrlUtils.SetQueryString("scale",o,window.location.toString());p=AR.ClientUrlUtils.SetQueryString("ismetric",n?"1":"0",p);
window.location=p;return true}}}};var e=function(){var p=$("input:checked",f).length;var o=$("input",f).length;var n=$("#btnIngredientsCheckAll",l);
if(p==0){AR.Core.Utilities.ButtonEnable(b,false)}else{AR.Core.Utilities.ButtonEnable(b,true,function(q){a(q)})}if(p!=o){n.text("Check All")
}else{n.text("Uncheck All")}};var d=function(){var n=$("#btnIngredientsCheckAll",l);if(n.text()=="Check All"){$("input",f).attr("checked",true);
n.text("Uncheck All");AR.Core.Utilities.ButtonEnable(b,true,function(o){a(o)})}else{$("input",f).attr("checked",false);n.text("Check All");
AR.Core.Utilities.ButtonEnable(b,false)}};var a=function(n){if(AR.VisitorInfo.IsLoggedIn()){var r=$("#ddlShoppingLists","#toolbar").val();
var p=m.data("typespecificid");var q=l.data("currentservings");var o=[];$("input:checked",f).each(function(){var t=$(this).closest("li");
var u=$(t).data("ingredientid");var s=$(t).data("grams");o.push("MasterIngredientID_"+u+"|Grams_"+s)});b.css("cursor","wait");
AR.ClientService.AddIngredientsToShoppingList(r,p,q,o,c)}else{AR.DialogLinker.OnLinkRequiringLogin(n,b)}};var c=function(n){b.css("cursor","auto");
if(n.ResponseCode==AR.ResponseCode.Success){AR.Analytics.SendBeacon({pev2:"Add Grocery Item",eVar7:AR.Analytics.Action.Source.RecipePage,eVar8:AR.Analytics.Action.Type.ShoppingListAddItem,eVar9:AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType),prop34:AR.Analytics.Action.LinkName.ShoppingListAddCheckedItems,linkTrackVars:"eVar7,eVar8,eVar9,prop34,events",events:"event9,event10",linkTrackEvents:"event9,event10"});
AR.Loader.Hide();AR.MessageBox.ShowSuccess("Ingredients added! <a href='/my/shoppinglist/default.aspx'>Go to my Shopping List.</a>","#msgAddIngredients",false)
}else{AR.Loader.Hide();AR.MessageBox.ShowFailure("Oops, something went wrong. Please try again.","#msgAddIngredients",false)}};
var k="You must enter a number between 1 and 300.";h()});if(typeof(AR.RecipePage)==="undefined"){AR.RecipePage={}}(function(e,a,d){var j,h,k,f,b,g,c;
e.Initialize=function(){j=a("#zoneRecipe");h=a("#zoneIngredients",j);k=a(".ingred-video",h);b=a(".slideshow-viewport",k);carouselActiveItemContainer=a(".carousel-active",k);
arrowLeft=a(".sldshw-arrw-l",k);arrowRight=a(".sldshw-arrw-r",k);f=a(".fluidBucket",k);g=a("#lnkVideoCaption",b);page=0;b.data("current-page",page);
g.textTruncate({multiline:true,wrap:"word",title:true,height:45,width:90,tooltip:false})};a(document).ready(function(){e.Initialize()
})})(AR.RecipePage.Videos=AR.RecipePage.Videos||{},jQuery);$(document).ready(function(){$("#btnScrollToReview").unbind("click").bind("click",function(a){a.preventDefault();
AR.Core.Utilities.ScrollTo($("#rateThisRecipe","#zoneRecipe"),function(){AR.Core.Reviews.OpenLoadingLayer(AR.Core.Reviews.OpenReviewDialog,null)
})});$("#btnUnratedScrollToReview").unbind("click").bind("click",function(){event.preventDefault();AR.Core.Utilities.ScrollTo($("#rateThisRecipe","#zoneRecipe"))
})});if(typeof(AR.RecipePage)=="undefined"){AR.RecipePage={}}$(document).ready(function(){(function(e,a,g){var h=a("#zoneRecipe"),d=a("#zonePhotoCarousel",h),f=a(".modal-recipe-photo-carousel",h),b=a("#lnkOpenPhotoUpload",d);
e.Initialize=function(){b.click(function(){c()})};function c(){f.hide()}})(AR.RecipePage.PhotoCarousel=AR.RecipePage.PhotoCarosel||{},jQuery);
AR.RecipePage.PhotoCarousel.Initialize()});AR.PhotoCarousel={Config:{PageSize:10,MessageBoxSelector:"#msgLabel",ErrorLoadingMessage:"Sorry, there was an error loading the current photo."},Options:{ContainerSelector:".modal-recipe-photos"},Data:{ItemID:0,IsRecipe:false,CurrentPhotoIndex:0,TotalRecords:0,Photos:{}},GetCurrentPageNumber:function(){return this.GetPageNumber(AR.PhotoCarousel.Data.CurrentPhotoIndex)
},GetIsCurrentPage:function(a){return(a==this.GetCurrentPageNumber())},GetPreviousPhotoIndex:function(){return(AR.PhotoCarousel.Data.CurrentPhotoIndex==0)?(AR.PhotoCarousel.Data.TotalRecords-1):(AR.PhotoCarousel.Data.CurrentPhotoIndex-1)
},GetNextPhotoIndex:function(){return(AR.PhotoCarousel.Data.CurrentPhotoIndex==(AR.PhotoCarousel.Data.TotalRecords-1))?0:(AR.PhotoCarousel.Data.CurrentPhotoIndex+1)
},GetPageNumber:function(a){return Math.ceil((a+1)/AR.PhotoCarousel.Config.PageSize)},LoadLayer:function(){var a=AR.PhotoCarousel.Data.CurrentPhotoIndex;
if(AR.PhotoCarousel.Data.Photos[a]){AR.PhotoCarousel.SetContent(AR.PhotoCarousel.Data.Photos[a])}else{AR.PhotoCarousel.WaitForNextDataPage(this.GetCurrentPageNumber(),AR.PhotoCarousel.LoadPhotoLayerData)
}AR.PhotoCarousel.PreLoadIndexData(this.GetNextPhotoIndex());AR.PhotoCarousel.PreLoadIndexData(this.GetPreviousPhotoIndex())},SetLinkOrSpan:function(b,a,c,d){if(d){$(b).hide();
$(a).show().attr("href",AR.ClientUrlProvider.ResolveUrl(d)).text(c)}else{$(b).show().text(c);$(a).hide()}},SetContent:function(g){if(g){if(AR.PhotoCarousel.Data.TotalRecords>1){$("#spnPageNumber").text(AR.PhotoCarousel.Data.CurrentPhotoIndex+1);
$("#spnPageCount").text(AR.PhotoCarousel.Data.TotalRecords);$(".photo-scroll-buttons").show();$("#jqViewAllDiv").show();$("#jqViewAllLink").attr("href",AR.PhotoCarousel.Data.PhotoGalleryUrl)
}else{$(".photo-scroll-buttons").hide();$("#jqViewAllDiv").hide()}var a=(g.User.CustomUrlPiece)?AR.ClientUrlProvider.ResolveUrl("~/Cook/"+g.User.CustomUrlPiece):AR.ClientUrlProvider.ResolveUrl("~/Cook/"+g.User.ObfuscatedUserID);
var j=g.User.ProfileImageUrl.replace("/userphotos/140x140/","/userphotos/50x50/");$("#jqPhotoTitleSpan").text(g.Title);if(g.Caption.toLowerCase()==g.Title.toLowerCase()){$("#jqPhotoCaptionSpan").hide()
}else{$("#jqPhotoCaptionSpan").show()}$("#jqPhotoCaptionSpan").text(g.Caption);$("#jqPhotoDateSpan").text(g.Date);var e=Encoder.htmlDecode(g.User.DisplayName);
$("#jqPhotographerDisplayName").text(e).textTruncate({width:220});$("[data-bind='display-name']").text(e).textTruncate({width:220});
if(g.User.HasHomePage){$("#jqPhotographerProfileSpan").hide();$("#jqPhotographerProfileLink").show().attr("href",a)}else{$("#jqPhotographerProfileSpan").show();
$("#jqPhotographerProfileLink").hide()}if(g.User.ProfileImageUrl==""){$("#jqPhotographerThumbnailImage").show().attr("src","http://images.media-allrecipes.com/mobile/allrecipes/images/weeble.png")
}else{var h=(j.substring(0,4)=="http")?j:AR.ClientUrlProvider.ResolveImageUrl(j);$("#jqPhotographerThumbnailImage").show().attr("src",h)
}$("#jqPhotographerBadgeDiv").removeClass("blinged");$("#jqPhotographerStarLink").hide();if(g.User.IsSupporting){$("#jqPhotographerBadgeDiv").addClass("blinged");
$("#jqPhotographerStarLink").show().attr("href",AR.ClientUrlProvider.ResolveUrl("~/SupportingMembership/Info.aspx?ect=21"))}$("#jqPhotographerAboutMe").text(g.User.AboutMe);
$("#jqPhotographerPhotoCount").text(g.User.PhotoCount);$("#jqPhotosText").text((g.User.PhotoCount===1)?"Photo":"Photos");$("#jqPhotographerProfileLink").attr("href",a+"/Profile.aspx");
if(g.User.RecipeCount>0){$("#jqPhotographerNoRecipesSpan").hide();$("#jqPhotographerRecipesLink").show().attr("href",a+"/Recipes.aspx")
}else{$("#jqPhotographerRecipesLink").hide();$("#jqPhotographerNoRecipesSpan").show()}var b=a+"/Photos.aspx";$("#jqPhotographerPhotosLink").attr("href",b);
$("#jqPhotographerPhotoCountContainer").click(function(){window.location=b});if(g.User.HomeTown){$(".home-town-modal").show();
AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerHomeTownCitySpan","#jqPhotographerHomeTownCityLink",g.User.HomeTown.City.Text,g.User.HomeTown.City.URI);
AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerHomeTownStateSpan","#jqPhotographerHomeTownStateLink",g.User.HomeTown.State.Text,g.User.HomeTown.State.URI);
AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerHomeTownCountrySpan","#jqPhotographerHomeTownCountryLink",g.User.HomeTown.Country.Text,g.User.HomeTown.Country.URI)
}else{$(".home-town-modal").hide()}if(g.User.LivingIn){$(".living-in-modal").show();AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerLivingInCitySpan","#jqPhotographerLivingInCityLink",g.User.LivingIn.City.Text,g.User.LivingIn.City.URI);
AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerLivingInStateSpan","#jqPhotographerLivingInStateLink",g.User.LivingIn.State.Text,g.User.LivingIn.State.URI);
AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerLivingInCountrySpan","#jqPhotographerLivingInCountryLink",g.User.LivingIn.Country.Text,g.User.LivingIn.Country.URI)
}else{$(".living-in-modal").hide()}$("#jqPhotographerBadgeDiv").removeClass("branded");AR.PhotoCarousel.PreLoadImage(g);AR.PhotoCarousel.PreLoadImage(AR.PhotoCarousel.Data.Photos[AR.PhotoCarousel.GetNextPhotoIndex()]);
AR.PhotoCarousel.PreLoadImage(AR.PhotoCarousel.Data.Photos[AR.PhotoCarousel.GetPreviousPhotoIndex()]);AR.AdDfpTags.RefreshAd("div-gpt-ad-recipephoto");
$("#imgPhotoImage").attr("src",g.Image.src);$("#jqPinterstPhotoLayerSpan").children().remove();var d="http://allrecipes.com"+window.location.pathname;
if(window.location.pathname.toLowerCase().indexOf("detail")==-1){if(window.location.pathname.lastIndexOf("/")==window.location.pathname.length-1){d=d+"detail.aspx"
}else{d=d+"/detail.aspx"}}$("<a>",{id:"newPinLink",title:"Pin It",href:"//pinterest.com/pin/create/button/?url="+d+"&description="+g.Title+" Allrecipes.com&media="+g.Image.src}).addClass("pin-it-button").appendTo("#jqPinterstPhotoLayerSpan");
$.ajax({url:"//assets.pinterest.com/js/pinit.js",dataType:"script",cache:true});if(!$(AR.PhotoCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.PhotoCarousel.Options.ContainerSelector)
}var c=$("#jqDescription");var f=$(AR.PhotoCarousel.Options.ContainerSelector).find(".right-column").innerHeight();c.height(f-$("#jqPhotographerBadgeDiv").outerHeight()-34);
if(c.attr("scrollHeight")>c.outerHeight()){c.css("border","1px solid #cccccc")}else{c.css("border","")}c.scrollTop(0);AR.PhotoCarousel.ToggleWaitingTreatment(false);
$("#jqPhotographerAboutMe").textTruncate({multiline:true,height:71,width:200,tooltip:false});$(".modal-recipe-photo-carousel",$("#zoneRecipe")).find(".modal-header").textTruncate({width:690})
}},PreLoadIndexData:function(a){var b=this.GetPageNumber(a);if(!AR.PhotoCarousel.GetIsCurrentPage(b)&&!AR.PhotoCarousel.Data.Photos[a]){AR.PhotoCarousel.GetDataFromService(b)
}},PreLoadImage:function(a){if(a&&!a.Image){if((new RegExp("https?://")).test(a.PhotoUrl)!=true){a.PhotoUrl=AR.ImageServer+a.PhotoUrl
}a.Image=new Image(250,250);a.Image.src=a.PhotoUrl}},GetDataFromService:function(a){if(AR.PhotoCarousel.GetIsCurrentPage(a)){AR.Cursor.SetWait()
}AR.ClientService.SuppressNextLoaderChange();AR.ClientService.GetPhotosPaged(AR.PhotoCarousel.Data.ItemID,AR.PhotoCarousel.Data.IsRecipe,a,AR.PhotoCarousel.Config.PageSize,AR.PhotoCarousel.Events.GetPhotosPaged_callback)
},StorePageData:function(c,b){if(c){var a=0;for(i=0;i<c.length;i++){a=((b-1)*AR.PhotoCarousel.Config.PageSize)+i;AR.PhotoCarousel.Data.Photos[a]=c[i]
}if(b!=AR.PhotoCarousel.GetCurrentPageNumber()){a=((b-1)*AR.PhotoCarousel.Config.PageSize);AR.PhotoCarousel.Data.Photos[a];a=((b-1)*AR.PhotoCarousel.Config.PageSize)+c.length;
AR.PhotoCarousel.Data.Photos[a]}}},ClearCachedData:function(){AR.PhotoCarousel.Data.ItemID=null;AR.PhotoCarousel.Data.IsRecipe=null;
AR.PhotoCarousel.Data.TotalRecords=0;AR.PhotoCarousel.Data.Photos=null},WaitForNextDataPage:function(b,a){AR.PhotoCarousel.ToggleWaitingTreatment(true);
a(b)},OpenLoadingLayer:function(b,a){if(b){AR.PhotoCarousel.ToggleWaitingTreatment(true);if(!$(AR.PhotoCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.PhotoCarousel.Options.ContainerSelector,1)
}AR.PhotoCarousel.Data.CurrentPhotoIndex=0;if(AR.PhotoCarousel.Data.ItemID!=b.itemID||AR.PhotoCarousel.Data.IsRecipe!=b.isRecipe||AR.PhotoCarousel.Data.Photos==null){AR.PhotoCarousel.ClearCachedData();
AR.PhotoCarousel.Data.ItemID=b.itemID;AR.PhotoCarousel.Data.IsRecipe=b.isRecipe;AR.PhotoCarousel.Data.PhotoGalleryUrl=b.photoGalleryUrl;
a(1)}else{AR.PhotoCarousel.LoadLayer()}}},ToggleWaitingTreatment:function(a){if(a){$("#photoDetailContainer").hide();$("#divModalLoading").show()
}else{$("#photoDetailContainer").show();$("#divModalLoading").hide()}},LoadPhotoLayerData:function(a){AR.PhotoCarousel.GetDataFromService(a)
},Events:{PreviousPhoto_onClick:function(a){a.preventDefault();AR.PhotoCarousel.Data.CurrentPhotoIndex=AR.PhotoCarousel.GetPreviousPhotoIndex();
AR.PhotoCarousel.RecordView(true);AR.PhotoCarousel.LoadLayer()},NextPhoto_onClick:function(a){a.preventDefault();AR.PhotoCarousel.Data.CurrentPhotoIndex=AR.PhotoCarousel.GetNextPhotoIndex();
AR.PhotoCarousel.RecordView(true);AR.PhotoCarousel.LoadLayer()},ViewAll_onClick:function(a){AR.Analytics.RecordInternalSource(AR.Analytics.Action.LinkName.RecipePhotoLayerViewAll)
},GetPhotosPaged_callback:function(d){var b=false;var a="";var e=AR.ShouldLogResponseCode(d.ResponseCode);if(d.ResponseCode==AR.ResponseCode.Success){var c=d.Data.PageNumber==AR.PhotoCarousel.GetCurrentPageNumber();
AR.PhotoCarousel.Data.TotalRecords=d.Data.TotalRecords;if(AR.PhotoCarousel.Data.Photos==null){AR.PhotoCarousel.Data.Photos=new Array(d.Data.TotalRecords)
}if(d.Data.PageNumber>0&&d.Data.Items.length>0){AR.PhotoCarousel.StorePageData(d.Data.Items,d.Data.PageNumber);if(c){AR.PhotoCarousel.LoadLayer();
AR.PhotoCarousel.ToggleWaitingTreatment(false)}}else{b=true;e=true}}else{b=true}if(b){AR.Dialog.CloseModalBox();AR.MessageBox.ShowFailure(AR.PhotoCarousel.Config.ErrorLoadingMessage,AR.PhotoCarousel.Config.MessageBoxSelector);
if(e){AR.LogErrorEx({ItemID:AR.LogEval("AR.PhotoCarousel.Data.ItemID"),IsRecipe:AR.LogEval("AR.PhotoCarousel.Data.IsRecipe")},"PhotoCarousel","Error in GetPhotosPaged_onSuccess.")
}}AR.Cursor.SetDefault()}},Initialize:function(){$(".open_modal-recipe-photos").bind("click",function(){var a=AR.ServerSideData.GetByDom(this);
AR.PhotoCarousel.OpenLoadingLayer(a,AR.PhotoCarousel.LoadPhotoLayerData);AR.PhotoCarousel.RecordView(false)});$("#lnkNextPhoto").click(this.Events.NextPhoto_onClick);
$("#lnkPreviousPhoto").click(this.Events.PreviousPhoto_onClick);$("#jqViewAllLink").click(this.Events.ViewAll_onClick);if(arguments.length>0){AR.PhotoCarousel.Options.ContainerSelector=arguments[0]
}},RecordView:function(a){AR.Analytics.RecordPageView({pageName:"/recipe/"+AR.FriendlyName+"/photo-gallery-layer",channel:"Recipes",events:"event1",prop6:AR.Analytics.Action.ContentType.RecipePhoto,prop9:1,prop24:(a?AR.Analytics.Action.LinkName.RecipePhotoLayerTurn:"Recipe Photo"),prop36:AR.Analytics.Action.LayerName.RecipePhoto})
}};$(document).ready(function(){var C=$("#zoneRecipe");var c=$("#rateThisRecipe",C);var y=$("#txtReview",c);var B=$("#txtReviewSpan",c);
var z=$("#txtReviewEdit",c);var w=$("#txtRatingEdit",c);var A=$("#txtReviewDonePanel",c);var h=$("#myrating",c);var a=$("#lnkOpenPhotoUpload",c);
var t=$("#submitPanel",c);var d=$("#customizePanel",c);var s=$("#btnSubmitReview",c);var o=h.next("div");var g=$("#msgRating",c);
var l=$(".textRating",c);var n=$("#socialSharing",c);var e=500;var v=0;var k=0;var u=0;var j=0;h.data("rating",0);var r=function(D){var E=AR.Core.Stars.GetRatingAndWidthFromMouseCoord(o,D);
h.css("width",E.width);v=E.width;u=E.rating};var q=function(D){if(v!=k){h.css("width",k)}};var p=function(D){if(AR.VisitorInfo.IsLoggedIn()){k=v;
j=u;l.css("color","#2D2D2D");if(j==1){l.text("Couldn't eat it")}else{if(j==2){l.text("Didn't like it")}else{if(j==3){l.text("It was OK")
}else{if(j==4){l.text("Liked it")}else{if(j==5){l.text("Loved it")}}}}}h.data("rating",j);b()}};var b=function(){y.animate({height:"110px"},e);
t.slideDown(e)};var m=function(){var I=AR.VisitorInfo._data._ID;var E=h.data("rating");var G=y.val();var F=C.data("typespecificid");
var D=C.data("itemtypeid");if(AR.VisitorInfo.IsLoggedIn()){if(G=="Have you tried this recipe? What did you think?"){G=""}var H=function(J){if(J.ResponseCode==0){AR.Analytics.SendBeacon({pev2:AR.Analytics.Action.CustomLinkClick.RecipeReview,eVar7:AR.Analytics.Action.Source.RecipePage,eVar8:AR.Analytics.Action.Type.RecipeReview,eVar9:AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType),linkTrackVars:"eVar7,eVar8,eVar9,events",events:"event9,event10",linkTrackEvents:"event9,event10"});
o.unbind("mousemove");o.unbind("click");o.unbind("mouseleave");y.fadeOut(e,function(){B.text(G);if(G==""){z.hide();w.show();A.hide()
}else{w.hide();z.show();A.fadeIn(e)}});a.fadeOut(e);t.fadeOut(e,function(){d.fadeIn(e);if(E>=4){n.css({height:"auto",overflow:"inherit"});
n.fadeIn(e)}else{n.hide()}})}else{l.css("color","red");l.text(J.Message)}};AR.ClientService.SaveReview(F,D,E,G,H)}};var f=function(){o.mousemove(r);
o.click(p);o.mouseleave(q);A.fadeOut(e,function(){w.hide();z.show();B.text("");y.fadeIn(e)});d.fadeOut(e,function(){a.fadeIn(e);
t.fadeIn(e)});n.fadeOut(e)};o.mousemove(r);o.click(p);o.mouseleave(q);z.click(f);w.click(f);s.click(m);if(AR.VisitorInfo.IsLoggedIn()){y.focus(b)
}});$(document).ready(function(){var a=$("#zoneNutrition",$("#zoneRecipe"));$("#nutritionSeeMore",a).click(function(){AR.Core.Nutrition.ToggleDetail(true)
})});$(document).ready(function(){var e=$("#zoneRecipe"),d=$("#zoneMoreLikeThis",e),b=$("[data-navigate-to-url]"),a=$("[data-container=more-recipes-like-this]",d),c=$("[data-mrlt-item=title]"),f=a.children("#mrltRecipeContainer").length;
c.each(function(){$(this).textTruncate({multiline:true,wrap:"word",title:true,height:45,width:90,tooltip:false})})});if(typeof(AR.RecipePage)==="undefined"){AR.RecipePage={}
}(function(e,a,k){var m="",l="",g="",h="",b="",c="",d="";var j=function(n){a('[data-mrlt-item="title"]',n).textTruncate({multiline:true,wrap:"word",title:true,height:45,width:90,tooltip:false})
};var f=function(o){o.preventDefault();var p=a(o.target),q=p.data("category"),n=d[q].length==0;g.toggleClass("active",false);
p.toggleClass("active",true);h.data("current-category",q).html(a("#template_MoreLikeThisByCatItem").jqote(d[q]));h.carousel();
j(h);AR.DialogLinker.LinkMembershipDialogs(h)};e.RegisterData=function(n){d=n};e.Initialize=function(){m=a("#zoneRecipe");l=a("#zoneMoreLikeThisByCategory",m);
g=a("#sortByNavigation li a:not(.disabled)",l);h=a("[data-container='more-like-this-by-category']",l);h.data("current-category","videos");
g.click(f);j(h)};a(document).ready(function(){e.Initialize()})})(AR.RecipePage.MoreLikeThisByCat=AR.RecipePage.MoreLikeThisByCat||{},jQuery);
$(document).ready(function(){var g=$("#zoneRecipe"),h=$("#zoneReview"),j=$("#reviewsection",g),a=$(".modal-recipe-reviews-carousel"),e=$("#spanReviewerInfo",j);
var d=function(l,m){if(m==null||m==undefined){m=0}var k=AR.ReviewCarousel.Data;AR.ReviewCarousel.Data.CurrentReviewIndex=m;delete AR.ReviewCarousel.Data.Reviews;
AR.ReviewCarousel.Data.Reviews=new Array(AR.ReviewCarousel.Data.TotalRecords);AR.Core.Reviews.LoadReviewLayer()};$("div.searchSortBy ul li a",h).click(function(k){$("div.searchSortBy ul li a[class='active']",h).removeClass("active");
var l=$(this);l.addClass("active");var m=l.data("sort");var n=AR.Analytics.Action.LinkName.ReviewLayerSortByMostHelpful;switch(m){case 2:n=AR.Analytics.Action.LinkName.ReviewLayerSortByNewest;
break;case 4:n=AR.Analytics.Action.LinkName.ReviewLayerSortByMostHelpful;break;case 5:n=AR.Analytics.Action.LinkName.ReviewLayerSortByLeastPositive;
break;case 6:n=AR.Analytics.Action.LinkName.ReviewLayerSortByMostPositive;break}AR.Analytics.RecordLinkName(n);AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerBlock,AR.Analytics.Action.LinkName.RecipeReviewLayerReviews);
d(m)});$(".link-open-review-dialog",g).click(function(k){$("div.searchSortBy ul li a",h).removeClass("active").first().addClass("active");
AR.Analytics.SendBeacon({prop34:AR.Analytics.Action.LinkName.RecipeReviewLayerMoreReviews,linkTrackVars:"prop34"});var n=(k==null)?AR.Analytics.Action.LinkName.RecipeReviewLayerReviews:AR.Analytics.Action.LinkName.RecipeReviewLayerMoreReviews;
AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerBlock,n);var o=1,m=-1;if($(this).data("page")!=undefined){o=$(this).data("page")
}if($(this).data("index")!=undefined){m=$(this).data("index")}if(m>=0){var p=((o-1)*10)+m;for(var l=0;l<p;l++){AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetNextReviewIndex()
}AR.Core.Reviews.OpenLoadingLayer(d,p)}else{AR.Core.Reviews.OpenLoadingLayer(d,null)}});$("#lnkReviewHelpful",a).click(function(){AR.Core.Reviews.IncrementHelpfulCounter()
});$("#lnkScrollReviewLeft",a).click(function(k){c(k)});$("#lnkScrollReviewRight",a).click(function(k){b(k)});var c=function(k){k.preventDefault();
if(!$("#lnkScrollReviewLeft").hasClass("left-arrow-inactive")){AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetPreviousReviewIndex();
AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn,"");AR.Core.Reviews.LoadReviewLayer()}};var b=function(k){k.preventDefault();
AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetNextReviewIndex();AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn,"");
AR.Core.Reviews.LoadReviewLayer()};var f=function(k){AR.Analytics.RecordInternalSource(AR.Analytics.Action.LinkName.RecipeReviewLayerViewAll)
}});AR.ReviewCarousel={Config:{PageSize:10,MessageBoxSelector:"#msgLabel",ErrorLoadingMessage:"Sorry, there was an error loading the current review.",DynamicMode:true},Options:{LoadIndexFromDataAttribute:false,ContainerSelector:".modal-recipe-reviews"},Data:{ItemID:0,ItemType:0,CurrentReviewIndex:0,TotalRecords:0,Reviews:{}},RegisterData:function(b,c,a,d){this.Data.ItemID=b;
this.Data.ItemType=c;if(a){this.Data.TotalRecords=a}if(d){this.Data.Reviews=d;this.Config.DynamicMode=true;this.Data.TotalRecords=Math.max(this.Data.TotalRecords,this.Data.Reviews.length)
}},GetCurrentPageNumber:function(){return this.GetPageNumber(AR.ReviewCarousel.Data.CurrentReviewIndex)},GetIsCurrentPage:function(a){return(a==this.GetCurrentPageNumber())
},GetPreviousReviewIndex:function(){return(AR.ReviewCarousel.Data.CurrentReviewIndex==0)?(AR.ReviewCarousel.Data.TotalRecords-1):(AR.ReviewCarousel.Data.CurrentReviewIndex-1)
},GetNextReviewIndex:function(){return(AR.ReviewCarousel.Data.CurrentReviewIndex==(AR.ReviewCarousel.Data.TotalRecords-1))?0:(AR.ReviewCarousel.Data.CurrentReviewIndex+1)
},GetPageNumber:function(a){return Math.ceil((a+1)/AR.ReviewCarousel.Config.PageSize)},LoadLayer:function(){var a=AR.ReviewCarousel.Data.CurrentReviewIndex;
if(!AR.ReviewCarousel.Config.DynamicMode){if(a==0&&AR.ReviewCarousel.Data.TotalRecords>AR.ReviewCarousel.Data.Reviews.length){$("#lnkPreviousReview").addClass("left-arrow-inactive")
}else{$("#lnkPreviousReview").removeClass("left-arrow-inactive")}}if(AR.ReviewCarousel.Data.Reviews[a]){AR.ReviewCarousel.SetContent(AR.ReviewCarousel.Data.Reviews[a])
}else{if(AR.ReviewCarousel.Config.DynamicMode){AR.ReviewCarousel.GetDataFromService(this.GetCurrentPageNumber())}else{AR.ReviewCarousel.Navigate("reviews.aspx?SortBy=Helpfulness&Direction=Descending&Page=2")
}}if(AR.ReviewCarousel.Config.DynamicMode&&AR.ReviewCarousel.Data.TotalRecords>0){AR.ReviewCarousel.PreLoadIndexData(this.GetNextReviewIndex());
AR.ReviewCarousel.PreLoadIndexData(this.GetPreviousReviewIndex())}},SetLinkOrSpan:function(b,a,c,d){if(d){$(b).hide();$(a).show().attr("href",d).text(c)
}else{$(b).show().text(c);$(a).hide()}},SetContent:function(c){if(c){if(AR.ReviewCarousel.Data.TotalRecords>1){$("#spnPageNumberReview").text(AR.ReviewCarousel.Data.CurrentReviewIndex+1);
$("#spnPageCountReview").text(AR.ReviewCarousel.Data.TotalRecords);$(".review-scroll-buttons").show();$("#jqViewAllDivReview").show();
$("#jqViewAllLinkReview").attr("href",AR.ReviewCarousel.Data.ReviewGalleryUrl)}else{$(".review-scroll-buttons").hide();$("#jqViewAllDivReview").hide()
}var a=(c.User.CustomUrlPiece)?AR.ClientUrlProvider.ResolveUrl("~/Cook/"+c.User.CustomUrlPiece):AR.ClientUrlProvider.ResolveUrl("~/Cook/"+c.User.ObfuscatedUserID);
$("#jqReviewTitleSpan").text(c.Title);$("#jqReviewRating").attr("src",AR.ClientUrlProvider.GetRatingImage(c.Rating));this.SetLinkOrSpan("#jqReviewerProfileSpan","#jqReviewerProfileLink",c.User.DisplayName,c.User.HasHomePage?a:null);
$("#jqReviewDate").text(c.Date);$("#jqReviewText").text(c.Text);$("#jqReviewHelpfulLink").data("reviewID",c.ID);$("#jqReviewHelpfulCount").text(c.HelpfulCount);
$("#jqReviewHelpfulContainer").show();$("#jqReviewHelpfulMessage").hide();var b=AR.ReviewCarousel.Data.CurrentReviewIndex+1;$("#jqAdIframeReview").attr("src",AR.Ads.GenerateIFrameURL(b,"300x250","review"));
if(!$(AR.ReviewCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.ReviewCarousel.Options.ContainerSelector)
}}},PreLoadIndexData:function(b,d,a){if(d==null||d==undefined){d=4}if(a==null||a==undefined){a=AR.ReviewCarousel.Events.GetReviewsPaged_callback
}var c=this.GetPageNumber(b);if(this.Config.DynamicMode&&!AR.ReviewCarousel.GetIsCurrentPage(c)&&!AR.ReviewCarousel.Data.Reviews[b]){AR.ReviewCarousel.GetDataFromService(c,d,a)
}},GetDataFromService:function(c,d,a){if(isNaN(c)||AR.ReviewCarousel.Data.ItemID==0){try{throw new Error("dummy exception")}catch(b){AR.LogAlert("pageNumber="+c+", ItemID="+AR.ReviewCarousel.Data.ItemID+", ItemType="+AR.ReviewCarousel.Data.ItemType,"AR.ReviewCarousel.GetDataFromService called with bad params",b.stack)
}return}if(d==null||d==undefined){d=4}if(a==null||a==undefined){a=AR.ReviewCarousel.Events.GetReviewsPaged_callback}if(!this.Config.DynamicMode){AR.MessageBox.ShowFailure(AR.ReviewCarousel.Config.ErrorLoadingMessage,AR.ReviewCarousel.Config.MessageBoxSelector)
}else{if(AR.ReviewCarousel.GetIsCurrentPage(c)){AR.Cursor.SetWait()}AR.ClientService.SuppressNextLoaderChange();AR.ClientService.GetReviewsPaged(AR.ReviewCarousel.Data.ItemID,AR.ReviewCarousel.Data.ItemType,c,AR.ReviewCarousel.Config.PageSize,d,a)
}},StorePageData:function(c,b){if(c){var a=0;for(i=0;i<c.length;i++){a=((b-1)*AR.ReviewCarousel.Config.PageSize)+i;AR.ReviewCarousel.Data.Reviews[a]=c[i]
}if(b!=AR.ReviewCarousel.GetCurrentPageNumber()){a=((b-1)*AR.ReviewCarousel.Config.PageSize);AR.ReviewCarousel.Data.Reviews[a];
a=((b-1)*AR.ReviewCarousel.Config.PageSize)+c.length;AR.ReviewCarousel.Data.Reviews[a]}}},Navigate:function(a){$(".review-body").hide();
if($("#review-loading").length>0){$("#review-loading").show()}else{$("#review-loading-new").show()}document.location=a},OpenCarousel:function(a){AR.ReviewCarousel.Data.CurrentReviewIndex=a;
AR.ReviewCarousel.LoadLayer()},Events:{Open_onClick:function(a){a.preventDefault();var b=AR.ReviewCarousel.Options.LoadIndexFromDataAttribute?AR.ServerSideData.Get($(this).data("server-data-key")):AR.ServerSideData.GetByDom(this);
if(b){AR.ReviewCarousel.OpenCarousel(parseInt(b.index));if(b.source=="review"){AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerBlock,AR.Analytics.Action.LinkName.RecipeReviewLayerReviews)
}else{AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerHeader,AR.Analytics.Action.LinkName.RecipeReviewLayerReviews)
}}},PreviousReview_onClick:function(a){a.preventDefault();if(!$(this).hasClass("left-arrow-inactive")){AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetPreviousReviewIndex();
AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn);AR.ReviewCarousel.LoadLayer()}},NextReview_onClick:function(a){a.preventDefault();
AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetNextReviewIndex();AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn);
AR.ReviewCarousel.LoadLayer()},ViewAll_onClick:function(a){AR.Analytics.RecordInternalSource(AR.Analytics.Action.LinkName.RecipeReviewLayerViewAll)
},Helpful_onClick:function(a){var b=$(this).data("reviewID");if(b){AR.ClientService.SuppressNextLoaderChange();AR.ClientService.IncrementReviewWasHelpful(b,function(){})
}$("#jqReviewHelpfulContainer").hide();$("#jqReviewHelpfulMessage").show()},GetReviewsPaged_callback:function(d){var b=false;
var a="";var e=AR.ShouldLogResponseCode(d.ResponseCode);if(d.ResponseCode==AR.ResponseCode.Success){var c=d.Data.PageNumber==AR.ReviewCarousel.GetCurrentPageNumber();
AR.ReviewCarousel.Data.TotalRecords=d.Data.TotalRecords;if(AR.ReviewCarousel.Data.Reviews==null){AR.ReviewCarousel.Data.Reviews=new Array(d.Data.TotalRecords)
}if(d.Data.PageNumber>0&&d.Data.Items.length>0){AR.ReviewCarousel.StorePageData(d.Data.Items,d.Data.PageNumber);if(c){AR.ReviewCarousel.LoadLayer()
}}else{b=true;e=true}}else{b=true}if(b){AR.Dialog.CloseModalBox();AR.MessageBox.ShowFailure(AR.ReviewCarousel.Config.ErrorLoadingMessage,AR.ReviewCarousel.Config.MessageBoxSelector);
if(e){AR.LogErrorEx({ItemID:AR.LogEval("AR.ReviewCarousel.Data.ItemID"),ItemType:AR.LogEval("AR.ReviewCarousel.Data.ItemType")},"ReviewCarousel","Error in GetReviewsPaged_callback.")
}}AR.Cursor.SetDefault()}},Initialize:function(){$(".open_modal-recipe-reviews").click(this.Events.Open_onClick);$("#lnkNextReview").click(this.Events.NextReview_onClick);
$("#lnkPreviousReview").click(this.Events.PreviousReview_onClick);$("#jqViewAllLinkReview").click(this.Events.ViewAll_onClick);
$("#jqReviewHelpfulLink").click(this.Events.Helpful_onClick);AR.ReviewCarousel.Options.LoadIndexFromDataAttribute=arguments[0];
AR.ReviewCarousel.Options.ContainerSelector=arguments[1]},RecordView:function(a,b){AR.Analytics.RecordPageView({pageName:"/recipe/"+AR.FriendlyName+"/review-layer",channel:"Recipes",events:"event1",prop6:AR.Analytics.Action.ContentType.Review,prop9:1,prop24:a,prop34:b,prop36:AR.Analytics.Action.LayerName.RecipeReview})
}};if(typeof(AR.RecipePage)==="undefined"){AR.RecipePage={}}(function(b,a,m){var o,n,h,k,e,c,d,f;var g=function(p){var r=a(p.target),q=r.data("follow-id");
AR.ClientService.AddToCooksILike(q,j)};var l=function(p){a('[data-mrlt-item="title"]',p).textTruncate({multiline:true,wrap:"word",title:true,height:40,width:70,tooltip:false})
};function j(p){if(p.ResponseCode===0){AR.MessageBox.ShowSuccess(f+" has been saved to Cooks I Like in <a href='/my/default.aspx'> my allrecipes.",n+" [data-message='follow']",false,10000)
}else{AR.MessageBox.ShowFailure(p.Message,n+" [data-message='follow']",false,10000)}}b.Initialize=function(){o="#zoneRecipe";
n="#zoneAboutThisCook";h=a("[data-follow-id]",n);e=a(".carousel",n);c=a(".sldshw-arrw-l",n);d=a(".sldshw-arrw-r",n);f=a("#anchorSubmitterName").text();
h.click(g);l(e)};a(document).ready(function(){b.Initialize()})})(AR.RecipePage.AboutThisCook=AR.RecipePage.AboutThisCook||{},jQuery);
(function(d,a,e){var c=true;var b=null;a("a#lnkWatchThisRecipeNew").click(function(f){f.preventDefault();a("div#msgAndToolbarWrapper").animate({marginTop:"190px"},500);
a("div#videoLayer").show(500,function(){a("span.addPhotoWrap,div#videoLink,div.partner-logo,span.time,div.social-icons,div.rating-stars.stars113x20,div.rating-stars.stars69x13").hide();
if(b){a("div#videoPlayer").html(b)}});if(c){a.getScript("http://admin.brightcove.com/js/BrightcoveExperiences_all.js",function(){brightcove.createExperiences();
c=false})}AR.Analytics.RecordInternalSource("RD_VideoLayer")});a("div#closeIt").click(function(f){f.preventDefault();b=a("div#videoPlayer").html();
a("div#videoPlayer").html("");a("span.addPhotoWrap,div#videoLink,div.partner-logo,span.time,div.social-icons,div.rating-stars.stars113x20,div.rating-stars.stars69x13").show();
a("div#videoLayer").hide(500);a("div#msgAndToolbarWrapper").animate({marginTop:"20px"},500)});if(RegExp("[?&]video=([^&]*)").exec(window.location.search)){setTimeout(function(){a("a#lnkWatchThisRecipeNew").click()
},3000)}})(AR.RecipePage.WatchThisRecipe=AR.RecipePage.WatchThisRecipe||{},jQuery);